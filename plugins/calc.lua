{"changed":true,"filter":false,"title":"calc.lua","tooltip":"/ASD_KARBALA/plugins/calc.lua","value":"do\n  \nlocal function get_fortunes_uc3m()\n  local i = math.random(0,178) -- max 178\n  local web = \"http://www.gul.es/fortunes/f\"..i\n  local b, c, h = http.request(web)\n  return b\nend\n\n\nlocal function run(msg, matches)\n  return get_fortunes_uc3m()\nend\n\nreturn {\n  description = \"Fortunes from Universidad Carlos III\", \n  usage = \"!uc3m\",\n  patterns = {\n    \"^!uc3m$\"\n  }, \n  run = run \n}\n\nend","undoManager":{"mark":-2,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":29,"column":1},"action":"remove","lines":["— Function reference: http://mathjs.org/docs/reference/functions/categorical.html","","local function mathjs(exp)","  local url = 'http://api.mathjs.org/v1/'","  url = url..'?expr='..URL.escape(exp)","  local b,c = http.request(url)","  local text = nil","  if c == 200 then","    text = '= '..b","  ","  elseif c == 400 then","    text = b","  else","    text = 'Error!'","  end","  return text","end","","local function run(msg, matches)","  return mathjs(matches[1])","end","","return {","  description = \"Calculate Your Formulas\",","  usage = \"/احسب (formulas) : ex.formulas (3+7)*(2^3)/5\",","  patterns = {","    \"^[!/]احسب (.*)$\"","  },","  run = run","}"],"id":2},{"start":{"row":0,"column":0},"end":{"row":23,"column":3},"action":"insert","lines":["do","  ","local function get_fortunes_uc3m()","  local i = math.random(0,178) -- max 178","  local web = \"http://www.gul.es/fortunes/f\"..i","  local b, c, h = http.request(web)","  return b","end","","","local function run(msg, matches)","  return get_fortunes_uc3m()","end","","return {","  description = \"Fortunes from Universidad Carlos III\", ","  usage = \"!uc3m\",","  patterns = {","    \"^!uc3m$\"","  }, ","  run = run ","}","","end"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":23,"column":3},"end":{"row":23,"column":3},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1463106228000}